<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="canonical" href="https://noresmhub.github.io/NorESM_LandSites_Platform/">
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>NorESM_LandSites_Platform documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="stylesheets/map.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = "/NorESM_LandSites_Platform/";
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> NorESM_LandSites_Platform documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">Home</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#platform-content">Platform content</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#input-data">Input data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#compsets">Compsets</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#atmospheric-forcing">Atmospheric forcing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#surface-data">Surface data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#spin-up">Spin-up</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#simulation">Simulation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#settings-file">Settings file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#make_casespy">make_cases.py</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#run_casespy">run_cases.py</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#postprocess">Postprocess</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="land-sites/">NorESM land sites</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="user_guide/">User guide</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="about/">About</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/">Contributing & code of conduct</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">NorESM_LandSites_Platform documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="welcome-to-the-documentation-of-the-noresm-landsites-platform">Welcome to the documentation of the NorESM LandSites Platform</h1>
<p>This page describes what the platform contains, how the input data were made, the main functionalities, and model output. Users should go to <a href="https://noresmhub.github.io/NorESM_LandSites_Platform/user_guide">this user guide</a>, and refer to this documentation for further detail. Advanced users may also be interested in the technical documentation of <a href="https://fates-docs.readthedocs.io/en/stable/">FATES</a> and <a href="https://www.cesm.ucar.edu/models/clm/">CLM</a>.</p>
<p>The <a href="https://en.wikipedia.org/wiki/Git" title="a place to store code with version control">GitHub repository</a> with the main code is stored <a href="https://github.com/NorESMhub/NorESM_LandSites_Platform">here</a>. We also have additional repositories for <a href="https://github.com/huitang-earth/NLP_prep">preparing new forcing data for our sites</a> and <a href="https://github.com/evalieungh/map_scripts">illustrating site locations</a>.</p>
<p>To run model simulations, go to our user guide. Advanced users who want to do development, in addition to just running simulations, can request resources on <a href="https://nrec.no/" title="Norwegian Research and Education Cloud: Fast, standardized servers and storage for the Norwegian higher education sector">NREC</a>. An early version of the platform is also available on <a href="https://training.galaxyproject.org/training-material/topics/climate/tutorials/fates/tutorial.html" title="an open, web-based platform for accessible, reproducible, and transparent computational biological research">Galaxy</a>.</p>
<hr />
<h2 id="platform-content">Platform content</h2>
<p>You can use the platform to run <a href="https://en.wikipedia.org/wiki/Climate_model#/media/File:Global_Climate_Model.png" title="the world is divided into a 3-dimensional grid, where equations can be solved within each gridcell, and information passed between gridcells at certain time points. Single-cell model 'runs' only simulate model processes for a single gridcell, which takes a lot less computational power">single-cell model simulations</a>. We provide <a href="https://noresmhub.github.io/NorESM_LandSites_Platform/land-sites/">sites</a> with high quality input data (atmospheric forcing, land surface data, 'spin-up'), and narrow down the long list of possible output variables into something manageable.</p>
<p><em>add an illustration here</em></p>
<h2 id="input-data">Input data</h2>
<p>Running the model requires specifying compsets, atmospheric forcing, land surface parameters, and spin-up to get realistic simulations. </p>
<p>The input data are <a href="https://ns2806k.webs.sigma2.no/EMERALD/EMERALD_platform/inputdata_fates_platform/">here</a>, with a <a href="https://ns2806k.webs.sigma2.no/EMERALD/EMERALD_platform/inputdata_fates_platform/readme.inpudata_emerald_platform">readme</a> file with further detail. The .tar files are compressed, and can be opened as a folder with e.g. 7-zip by right-clicking and choosing 'open archive', and used after extracting (unzipping). The data files are stored in <a href="https://www.unidata.ucar.edu/software/netcdf/">.nc (NetCDF)</a> format, which can be viewed using Panoply, or packages in Python or <a href="https://cran.r-project.org/web/packages/ncdf4/index.html">R</a>. The output data from simulations are stored in the same format.</p>
<p>The input data .tar file contains three folders: (1) 'shared' domain files with gridcell longitude, latitude, and area; (2) <a href="https://noresmhub.github.io/NorESM_LandSites_Platform/#surface-data">land (=lnd)</a> surface data, and (3) <a href="https://noresmhub.github.io/NorESM_LandSites_Platform/#atmospheric-forcing">atmosphere (=atm)</a> data. The input data are <a href="https://noresmhub.github.io/NorESM_LandSites_Platform/land-sites/">site</a>-specific. </p>
<h3 id="compsets">Compsets</h3>
<p>Short for component sets, compsets specify which component models are used as well as specific settings for forcing scenarios and physics options. Compsets have a short name and a longer name with abbreviations denoting the components included. See more in the <a href="https://escomp.github.io/ctsm-docs/versions/release-clm5.0/html/users_guide/setting-up-and-running-a-case/choosing-a-compset.html">CLM user guide</a>.</p>
<p>Currently, we only support the following 'compset', with long name:</p>
<blockquote>
<p>2000_DATM%1PTGSWP3_CLM50%FATES_SICE_SOCN_MOSART_SGLC_SWAV</p>
</blockquote>
<p>The notation for the compset longname is: <code>TIME_ATM[%phys]\_LND[%phys]\_ICE[%phys]\_OCN[%phys]\_ROF[%phys]\_GLC[%phys]\_WAV[%phys]</code>
The compset longname has a specified order: atm, lnd, ice, ocn, river, glc, and wave. Each component model version may be "active," "data," "dead," or "stub". Stub components are used instead of active to save computation time and input requirements when that component is not needed for the model configuration. For instance, the active land component forced with atmospheric data, does not need ice, ocn, or glc components to be active and can replace them with stubs. </p>
<ul>
<li>TIME: Initialization Time, here for the year 2000 which gives present day conditions (as opposed to pre-industrial)</li>
<li>ATM: Atmosphere, here DATM%1PTGSWP3 for data driven (D) atmosphere (ATM) component driven in a point (PT) by <a href="https://www.isimip.org/gettingstarted/input-data-bias-correction/details/4/">GSWP3</a> forcing data</li>
<li>LND: Land, here CLM50%FATES for active Community Land Model version 5.0 and FATES vegetation</li>
<li>ICE: Sea-ice, here SICE stub ice</li>
<li>OCN: Ocean, here SOCN stub ocean</li>
<li>ROF: River runoff, here MOSART the MOdel for Scale Adaptive River Transport</li>
<li>GLC: Land Ice, here SGLC stub glacier (land ice) component</li>
<li>WAV: Wave, here SWAV stub wave component </li>
</ul>
<p>We plan to make more compsets available in future versions.</p>
<h3 id="atmospheric-forcing">Atmospheric forcing</h3>
<p>Atmospheric forcing data drives the modelled climate using a time series of climatic variables. Downloadable data products exist, but is often on too coarse scales for realistic single-point simulations. Here is a list of atmospheric forcing variables used in CLM:
- Incident solar radiation (FSDS),  W/m2
- Temperature at the lowest atmospheric level (TBOT), degrees K (or can be C)
- Precipitation (PRECTmms), mm/s
- Wind speed at the lowest atmospheric level (WIND), m/s</p>
<p>Forcing data for our sites are stored with the rest of the <a href="https://ns2806k.webs.sigma2.no/EMERALD/EMERALD_platform/inputdata_fates_platform/">input data</a>. Here are some exaples of what the input data .tar contains: </p>
<ul>
<li>CAM/chem/trop_mozart_aero/aero/</li>
<li>aerosol deposition: dust, black carbon, organic carbon</li>
<li>datm7</li>
<li>GSWP3v1<ul>
<li>monthly atmospheric forcing from the <a href="https://www.isimip.org/gettingstarted/input-data-bias-correction/details/4/">GSWP3</a> data product. The variables in the above list are stored in these files.</li>
</ul>
</li>
<li>NASA_LIS<ul>
<li>lightning frequency</li>
</ul>
</li>
<li>topo_forcing<ul>
<li>topography height</li>
</ul>
</li>
</ul>
<p>If you have your own data, you can replace the default input files with your own. <em>under construction: Instruction for how to do this</em>. Make sure the format and units are the exact same, otherwise the model will not be able to use them. For more information on using custom input to CLM, see the <a href="https://www.cesm.ucar.edu/models/cesm1.0/clm/models/lnd/clm/doc/UsersGuide/x9798.html">CLM documentation</a></p>
<h3 id="surface-data">Surface data</h3>
<p>Surface data contains information the model needs about the land surface, such as land use trajectories, soil properties, vegetation parameters, and <a href="https://en.wikipedia.org/wiki/Albedo">albedo</a>. Here are some exaples of what the input data .tar contains: </p>
<ul>
<li>'firedata'</li>
<li>population density </li>
<li>'paramdata'</li>
<li>CLM5 parameters: many parameters, covering e.g. Plant Functional Types (PFTs), allocation of carbon, photosynthetic pathway</li>
<li>FATES parameters: many parameters, covering e.g. Plant Functional Types (PFTs), allometry, carbon pools, nitrogen uptake, mortality, recruitment, fuel load for fire module </li>
<li>'snicardata'</li>
<li>snow "growth" parameters</li>
<li>snow "optics"</li>
<li>'surfdata_map'</li>
<li>surface data:  soil depth &amp; other properties, albedo &amp; thermal conductance of different surface types, and fraction of gridcell covered by vegetation, land, &amp; other land cover types</li>
<li>'urbandata'</li>
<li>urban classes, building interior temperature</li>
</ul>
<p>Note that when CLM is running without FATES, a simpler 'big-leaf'-version of vegetation is used instead. The CLM5 and FATES parameters thus overlap to some degree, with FATES replacing some and adding other parameters when activated. </p>
<p>For the <a href="https://noresmhub.github.io/NorESM_LandSites_Platform/land-sites/">Vestland climate grid sites</a>, surface data has been created from raw data sets, using <a href="https://github.com/huitang-earth/NLP_prep/blob/main/create_inputdata.sh" title="a script in Hui's repository for preparing input data">this script</a>. There are publicly available data products that could be downloaded and extracted for the nearest model gridcell, given points coordinates, that contain all the necessary surface data. We have not used this; our surface data is interpolated from raw data sets of better resolution. This data should be more accurate than the alternative data products. </p>
<p>If you have your own data, you can replace the default input files with your own. <strong><em>under construction: Instruction for how to do this</em></strong>. Make sure the format and units are the same, otherwise the model will not be able to use them. </p>
<p>For more information on using custom input to CLM, see the <a href="https://www.cesm.ucar.edu/models/cesm1.0/clm/models/lnd/clm/doc/UsersGuide/x9798.html">CLM documentation</a></p>
<h3 id="spin-up">Spin-up</h3>
<p>To get realistic simulations, the model needs to run for a while to reach a state of equilibrium under the applied forcing. Starting the model from "bare ground", the climate is not in equilibrium, there is no or only unrealistic soil, and the model needs time to grow and kill vegetation to get appropriate soil properties and a stable climate. We provide "restart" files for our sites with the following spin-up phase settings:</p>
<ul>
<li><strong>under construction</strong></li>
</ul>
<h2 id="simulation">Simulation</h2>
<p><strong><em>under construction</em></strong></p>
<h3 id="settings-file">Settings file</h3>
<p><strong><em>under construction</em></strong></p>
<h3 id="make_casespy">make_cases.py</h3>
<p><strong><em>under construction</em></strong></p>
<h3 id="run_casespy">run_cases.py</h3>
<p><strong><em>under construction</em></strong></p>
<h2 id="postprocess">Postprocess</h2>
<p><strong><em>under construction</em></strong></p>
<ul>
<li>output files</li>
<li>history variables</li>
<li>plotting suggestions</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="land-sites/" class="btn btn-neutral float-right" title="NorESM land sites">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="land-sites/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="javascripts/map.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.2.3
Build Date UTC : 2022-02-11 10:57:19.554960+00:00
-->
